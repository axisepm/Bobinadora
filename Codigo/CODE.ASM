
; PICBASIC PRO(TM) Compiler 2.60, (c) 1998, 2009 microEngineering Labs, Inc. All Rights Reserved. 
_USED			EQU	1

	INCLUDE	"C:\PROGRA~2\PBP\16F84A.INC"


; Define statements.
; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00014	define LCD_DREG     PORTB  'definimos que puerto vamos a usar para el LCD
#define		LCD_DREG		     PORTB  
; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00015	DEFINE LCD_DBIT     4      'A partir de que pin
#define		LCD_DBIT		     4      
; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00016	DEFINE LCD_RSREG    PORTA  'Definimos en que puerto esta el RS
#define		LCD_RSREG		    PORTA  
; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00017	DEFINE LCD_RSBIT    1      'RA1
#define		LCD_RSBIT		    1      
; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00018	DEFINE LCD_EREG     PORTA  'Definimos en que puerto esta el E
#define		LCD_EREG		     PORTA  
; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00019	DEFINE LCD_EBIT     0      'RA0                                                                      
#define		LCD_EBIT		     0      

RAM_START       		EQU	0000Ch
RAM_END         		EQU	0004Fh
RAM_BANKS       		EQU	00001h
BANK0_START     		EQU	0000Ch
BANK0_END       		EQU	0004Fh
EEPROM_START    		EQU	02100h
EEPROM_END      		EQU	0213Fh

; C:\PROGRA~2\PBP\PBPPIC14.RAM	00012	A0000C	R0      VAR     WORD BANK0 SYSTEM       ' System Register
R0              		EQU	RAM_START + 000h
; C:\PROGRA~2\PBP\PBPPIC14.RAM	00013	A0000E	R1      VAR     WORD BANK0 SYSTEM       ' System Register
R1              		EQU	RAM_START + 002h
; C:\PROGRA~2\PBP\PBPPIC14.RAM	00014	A00010	R2      VAR     WORD BANK0 SYSTEM       ' System Register
R2              		EQU	RAM_START + 004h
; C:\PROGRA~2\PBP\PBPPIC14.RAM	00015	A00012	R3      VAR     WORD BANK0 SYSTEM       ' System Register
R3              		EQU	RAM_START + 006h
; C:\PROGRA~2\PBP\PBPPIC14.RAM	00016	A00014	R4      VAR     WORD BANK0 SYSTEM       ' System Register
R4              		EQU	RAM_START + 008h
; C:\PROGRA~2\PBP\PBPPIC14.RAM	00017	A00016	R5      VAR     WORD BANK0 SYSTEM       ' System Register
R5              		EQU	RAM_START + 00Ah
; C:\PROGRA~2\PBP\PBPPIC14.RAM	00018	A00018	R6      VAR     WORD BANK0 SYSTEM       ' System Register
R6              		EQU	RAM_START + 00Ch
; C:\PROGRA~2\PBP\PBPPIC14.RAM	00019	A0001A	R7      VAR     WORD BANK0 SYSTEM       ' System Register
R7              		EQU	RAM_START + 00Eh
; C:\PROGRA~2\PBP\PBPPIC14.RAM	00020	A0001C	R8      VAR     WORD BANK0 SYSTEM       ' System Register
R8              		EQU	RAM_START + 010h
; C:\PROGRA~2\PBP\PBPPIC14.RAM	00026	A0001E	FLAGS   VAR     BYTE BANK0 SYSTEM       ' Static flags
FLAGS           		EQU	RAM_START + 012h
; C:\PROGRA~2\PBP\PBPPIC14.RAM	00025	A0001F	GOP     VAR     BYTE BANK0 SYSTEM       ' Gen Op Parameter
GOP             		EQU	RAM_START + 013h
; C:\PROGRA~2\PBP\PBPPIC14.RAM	00022	A00020	RM1     VAR     BYTE BANK0 SYSTEM       ' Pin 1 Mask
RM1             		EQU	RAM_START + 014h
; C:\PROGRA~2\PBP\PBPPIC14.RAM	00024	A00021	RM2     VAR     BYTE BANK0 SYSTEM       ' Pin 2 Mask
RM2             		EQU	RAM_START + 015h
; C:\PROGRA~2\PBP\PBPPIC14.RAM	00021	A00022	RR1     VAR     BYTE BANK0 SYSTEM       ' Pin 1 Register
RR1             		EQU	RAM_START + 016h
; C:\PROGRA~2\PBP\PBPPIC14.RAM	00023	A00023	RR2     VAR     BYTE BANK0 SYSTEM       ' Pin 2 Register
RR2             		EQU	RAM_START + 017h
; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00020	A00024	conteo var word     'Armamos la variable conteo. Esta variable la vamos a cortar en dos y la vamos a copiar a la EEPROM
_conteo          		EQU	RAM_START + 018h
; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00030	A00026	flash_lcd var byte 'Variable para flashear LCD
_flash_lcd       		EQU	RAM_START + 01Ah
; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00001	A00027	'****************************************************************
PB01            		EQU	RAM_START + 01Bh
; C:\PROGRA~2\PBP\16F84A.BAS	00018	PORTL   VAR     PORTB
_PORTL           		EQU	 PORTB
; C:\PROGRA~2\PBP\16F84A.BAS	00019	PORTH   VAR     PORTA
_PORTH           		EQU	 PORTA
; C:\PROGRA~2\PBP\16F84A.BAS	00020	TRISL   VAR     TRISB
_TRISL           		EQU	 TRISB
; C:\PROGRA~2\PBP\16F84A.BAS	00021	TRISH   VAR     TRISA
_TRISH           		EQU	 TRISA
_conteo??BYTE0   		EQU	_conteo
_conteo??BYTE1   		EQU	_conteo + 001h
#define _ongoing         	 PB01, 002h
#define _flagpulso       	 PB01, 000h
#define _halt            	 PB01, 001h
#define _stopped         	 PB01, 003h
#define _pulsos          	_PORTB??0
#define _start           	_PORTA??2
#define _pausa           	_PORTA??3
#define _parar           	_PORTA??4
#define _relay           	_PORTB??3
#define _PORTB??0        	 PORTB, 000h
#define _PORTA??2        	 PORTA, 002h
#define _PORTA??3        	 PORTA, 003h
#define _PORTA??4        	 PORTA, 004h
#define _PORTB??3        	 PORTB, 003h
	INCLUDE	"CODE.MAC"
	INCLUDE	"C:\PROGRA~2\PBP\PBPPIC14.LIB"


; C:\PROGRA~2\PBP\16F84A.BAS	00012	BANK0   $000C, $004F
; C:\PROGRA~2\PBP\16F84A.BAS	00013	EEPROM  $2100, $213F
; C:\PROGRA~2\PBP\16F84A.BAS	00014	LIBRARY "PBPPIC14"

; C:\PROGRA~2\PBP\16F84A.BAS	00016	        include "PIC14EXT.BAS"

; C:\PROGRA~2\PBP\16F84A.BAS	00023	        include "PBPPIC14.RAM"

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00013	variables:

	LABEL?L	_variables	
; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00014	define LCD_DREG     PORTB  'definimos que puerto vamos a usar para el LCD
; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00015	DEFINE LCD_DBIT     4      'A partir de que pin
; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00016	DEFINE LCD_RSREG    PORTA  'Definimos en que puerto esta el RS
; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00017	DEFINE LCD_RSBIT    1      'RA1
; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00018	DEFINE LCD_EREG     PORTA  'Definimos en que puerto esta el E
; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00019	DEFINE LCD_EBIT     0      'RA0                                                                      

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00031	TRISA=%00011100     'Todos los pines son salidas. RA2,RA3,RA4 son por ahora las entradas.(PORTA)
	MOVE?CB	01Ch, TRISA

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00032	TRISB=%00000001     'Todos los pines son salidas (PORTB) 
	MOVE?CB	001h, TRISB

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00033	pause 200
	PAUSE?C	0C8h

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00034	lcdout $fe,1,"Welcome" 'Primer mensaje al LCD 
	LCDOUT?C	0FEh
	LCDOUT?C	001h
	LCDOUT?C	057h
	LCDOUT?C	065h
	LCDOUT?C	06Ch
	LCDOUT?C	063h
	LCDOUT?C	06Fh
	LCDOUT?C	06Dh
	LCDOUT?C	065h

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00036	ongoing = 1
	MOVE?CT	001h, _ongoing

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00037	conteo = 65530
	MOVE?CW	0FFFAh, _conteo

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00038	Write 1,ongoing       
	WRITEADDRESS?C	001h
	WRITE?T	_ongoing

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00039	write 2,conteo.byte0
	WRITEADDRESS?C	002h
	WRITE?B	_conteo??BYTE0

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00040	write 3,conteo.byte1
	WRITEADDRESS?C	003h
	WRITE?B	_conteo??BYTE1

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00041	Pause 500
	PAUSE?C	001F4h

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00043	test_ongoing:

	LABEL?L	_test_ongoing	

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00044	read 1,ongoing 'leemos la eeprom. El resultado va a la variable 'ongoing'
	READADDRESS?C	001h
	READ?T	_ongoing

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00045	Branch ongoing, [no_ongoing_job,ongoing_job]
	BRANCH?TCL	_ongoing, 002h, L00001
	BRGOTO?L	_no_ongoing_job
	BRGOTO?L	_ongoing_job

	LABEL?L	L00001	

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00047	no_ongoing_job: 'Rutina que se ejecuta si no hay trabajo pendiente

	LABEL?L	_no_ongoing_job	

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00049	FOr flash_lcd = 1 to 4
	MOVE?CB	001h, _flash_lcd
	LABEL?L	L00002	
	CMPGT?BCL	_flash_lcd, 004h, L00003

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00050	lcdout $fe,1,"Starting new Job"
	LCDOUT?C	0FEh
	LCDOUT?C	001h
	LCDOUT?C	053h
	LCDOUT?C	074h
	LCDOUT?C	061h
	LCDOUT?C	072h
	LCDOUT?C	074h
	LCDOUT?C	069h
	LCDOUT?C	06Eh
	LCDOUT?C	067h
	LCDOUT?C	020h
	LCDOUT?C	06Eh
	LCDOUT?C	065h
	LCDOUT?C	077h
	LCDOUT?C	020h
	LCDOUT?C	04Ah
	LCDOUT?C	06Fh
	LCDOUT?C	062h

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00051	pause 100
	PAUSE?C	064h

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00052	lcdout $fe,1
	LCDOUT?C	0FEh
	LCDOUT?C	001h

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00053	Pause 100
	PAUSE?C	064h

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00054	NExt
	NEXT?BCL	_flash_lcd, 001h, L00002
	LABEL?L	L00003	

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00055	lcdout $fe,1,"Press start"
	LCDOUT?C	0FEh
	LCDOUT?C	001h
	LCDOUT?C	050h
	LCDOUT?C	072h
	LCDOUT?C	065h
	LCDOUT?C	073h
	LCDOUT?C	073h
	LCDOUT?C	020h
	LCDOUT?C	073h
	LCDOUT?C	074h
	LCDOUT?C	061h
	LCDOUT?C	072h
	LCDOUT?C	074h

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00056	Conteo=0   'Reseteamos el conteo a cero por las dudas
	MOVE?CW	000h, _conteo

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00059	listen_start_pin:       'testeamos el pin de entrada para saber cuando hay que arrancar

	LABEL?L	_listen_start_pin	

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00060	if start=1 then job
	CMPEQ?TCL	_start, 001h, _job

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00061	pause 50      
	PAUSE?C	032h

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00062	goto listen_start_pin  'encierra esto en un loop hasta que haya una entrada. 
	GOTO?L	_listen_start_pin

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00064	job:

	LABEL?L	_job	

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00065	high relay  'Mandamos un pulso para prender el relay
	HIGH?T	_relay

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00066	ongoing=1
	MOVE?CT	001h, _ongoing

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00067	write 1,ongoing 'Avisamos que hay un trabajo en progreso
	WRITEADDRESS?C	001h
	WRITE?T	_ongoing

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00068	lcdout $FE,1, "Job in Progress"
	LCDOUT?C	0FEh
	LCDOUT?C	001h
	LCDOUT?C	04Ah
	LCDOUT?C	06Fh
	LCDOUT?C	062h
	LCDOUT?C	020h
	LCDOUT?C	069h
	LCDOUT?C	06Eh
	LCDOUT?C	020h
	LCDOUT?C	050h
	LCDOUT?C	072h
	LCDOUT?C	06Fh
	LCDOUT?C	067h
	LCDOUT?C	072h
	LCDOUT?C	065h
	LCDOUT?C	073h
	LCDOUT?C	073h

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00069	lcdout $FE,$C5,DEC conteo,  " turns"               
	LCDOUT?C	0FEh
	LCDOUT?C	0C5h
	LCDOUTCOUNT?C	000h
	LCDOUTNUM?W	_conteo
	LCDOUTDEC?	
	LCDOUT?C	020h
	LCDOUT?C	074h
	LCDOUT?C	075h
	LCDOUT?C	072h
	LCDOUT?C	06Eh
	LCDOUT?C	073h

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00071	watch_pulses:

	LABEL?L	_watch_pulses	

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00072	if pulsos=1 then 
	CMPNE?TCL	_pulsos, 001h, L00004

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00073	gosub sumar
	GOSUB?L	_sumar

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00074	endif
	LABEL?L	L00004	

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00075	if pausa=1 then 
	CMPNE?TCL	_pausa, 001h, L00006

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00076	gosub pausar
	GOSUB?L	_pausar

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00077	endif
	LABEL?L	L00006	

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00078	if parar=1 then 
	CMPNE?TCL	_parar, 001h, L00008

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00079	gosub stoppear
	GOSUB?L	_stoppear

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00080	endif
	LABEL?L	L00008	

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00081	goto watch_pulses 'encierra hasta que haya un input
	GOTO?L	_watch_pulses

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00083	sumar:

	LABEL?L	_sumar	

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00084	pause 100
	PAUSE?C	064h

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00085	conteo=conteo+1
	ADD?WCW	_conteo, 001h, _conteo

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00086	write 2,conteo.byte0
	WRITEADDRESS?C	002h
	WRITE?B	_conteo??BYTE0

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00087	Write 3,conteo.byte1
	WRITEADDRESS?C	003h
	WRITE?B	_conteo??BYTE1

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00088	lcdout $FE,$C5,DEC conteo,  " turns"
	LCDOUT?C	0FEh
	LCDOUT?C	0C5h
	LCDOUTCOUNT?C	000h
	LCDOUTNUM?W	_conteo
	LCDOUTDEC?	
	LCDOUT?C	020h
	LCDOUT?C	074h
	LCDOUT?C	075h
	LCDOUT?C	072h
	LCDOUT?C	06Eh
	LCDOUT?C	073h

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00089	return
	RETURN?	

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00091	pausar:

	LABEL?L	_pausar	

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00092	Low relay
	LOW?T	_relay

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00093	lcdout $FE,$1, "Work Paused"
	LCDOUT?C	0FEh
	LCDOUT?C	001h
	LCDOUT?C	057h
	LCDOUT?C	06Fh
	LCDOUT?C	072h
	LCDOUT?C	06Bh
	LCDOUT?C	020h
	LCDOUT?C	050h
	LCDOUT?C	061h
	LCDOUT?C	075h
	LCDOUT?C	073h
	LCDOUT?C	065h
	LCDOUT?C	064h

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00094	lcdout $FE,$C0, "Press start"
	LCDOUT?C	0FEh
	LCDOUT?C	0C0h
	LCDOUT?C	050h
	LCDOUT?C	072h
	LCDOUT?C	065h
	LCDOUT?C	073h
	LCDOUT?C	073h
	LCDOUT?C	020h
	LCDOUT?C	073h
	LCDOUT?C	074h
	LCDOUT?C	061h
	LCDOUT?C	072h
	LCDOUT?C	074h

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00097	write 2,conteo.byte0
	WRITEADDRESS?C	002h
	WRITE?B	_conteo??BYTE0

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00098	Write 3,conteo.byte1
	WRITEADDRESS?C	003h
	WRITE?B	_conteo??BYTE1

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00100	Pause_loop:

	LABEL?L	_Pause_loop	

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00101	if start=1 then goto resume_job
	CMPNE?TCL	_start, 001h, L00010
	GOTO?L	_resume_job
	LABEL?L	L00010	

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00102	goto pause_loop 
	GOTO?L	_Pause_loop

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00104	Resume_job:

	LABEL?L	_resume_job	

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00105	pause 50
	PAUSE?C	032h

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00106	flash_lcd = 0 
	MOVE?CB	000h, _flash_lcd

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00107	for flash_lcd = 1 to 2 
	MOVE?CB	001h, _flash_lcd
	LABEL?L	L00012	
	CMPGT?BCL	_flash_lcd, 002h, L00013

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00108	lcdout $fe,1,"Resuming job"
	LCDOUT?C	0FEh
	LCDOUT?C	001h
	LCDOUT?C	052h
	LCDOUT?C	065h
	LCDOUT?C	073h
	LCDOUT?C	075h
	LCDOUT?C	06Dh
	LCDOUT?C	069h
	LCDOUT?C	06Eh
	LCDOUT?C	067h
	LCDOUT?C	020h
	LCDOUT?C	06Ah
	LCDOUT?C	06Fh
	LCDOUT?C	062h

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00109	pause 100
	PAUSE?C	064h

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00110	lcdout $fe,1
	LCDOUT?C	0FEh
	LCDOUT?C	001h

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00111	pause 100
	PAUSE?C	064h

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00112	next
	NEXT?BCL	_flash_lcd, 001h, L00012
	LABEL?L	L00013	

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00113	goto job
	GOTO?L	_job

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00115	stoppear: 

	LABEL?L	_stoppear	

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00116	Pause 100
	PAUSE?C	064h

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00117	low relay
	LOW?T	_relay

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00118	if stopped=1 then goto stop_loop
	CMPNE?TCL	_stopped, 001h, L00014
	GOTO?L	_stop_loop
	LABEL?L	L00014	

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00119	stopped=1
	MOVE?CT	001h, _stopped

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00120	Lcdout $fe,1,"Cancel?"
	LCDOUT?C	0FEh
	LCDOUT?C	001h
	LCDOUT?C	043h
	LCDOUT?C	061h
	LCDOUT?C	06Eh
	LCDOUT?C	063h
	LCDOUT?C	065h
	LCDOUT?C	06Ch
	LCDOUT?C	03Fh

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00121	LCDout $fe,$C0, "Stop to confirm"
	LCDOUT?C	0FEh
	LCDOUT?C	0C0h
	LCDOUT?C	053h
	LCDOUT?C	074h
	LCDOUT?C	06Fh
	LCDOUT?C	070h
	LCDOUT?C	020h
	LCDOUT?C	074h
	LCDOUT?C	06Fh
	LCDOUT?C	020h
	LCDOUT?C	063h
	LCDOUT?C	06Fh
	LCDOUT?C	06Eh
	LCDOUT?C	066h
	LCDOUT?C	069h
	LCDOUT?C	072h
	LCDOUT?C	06Dh

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00123	Stop_loop: 

	LABEL?L	_stop_loop	

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00124	if parar=1 then goto stop_sequence
	CMPNE?TCL	_parar, 001h, L00016
	GOTO?L	_stop_sequence
	LABEL?L	L00016	

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00125	goto stop_loop
	GOTO?L	_stop_loop

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00127	Stop_sequence:     'TO DO: Revisar esta rutina

	LABEL?L	_stop_sequence	

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00128	Pause 100
	PAUSE?C	064h

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00129	lcdout $fe,1, "Job stopped"
	LCDOUT?C	0FEh
	LCDOUT?C	001h
	LCDOUT?C	04Ah
	LCDOUT?C	06Fh
	LCDOUT?C	062h
	LCDOUT?C	020h
	LCDOUT?C	073h
	LCDOUT?C	074h
	LCDOUT?C	06Fh
	LCDOUT?C	070h
	LCDOUT?C	070h
	LCDOUT?C	065h
	LCDOUT?C	064h

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00130	LCDout $fe,$C0, "Press Start"
	LCDOUT?C	0FEh
	LCDOUT?C	0C0h
	LCDOUT?C	050h
	LCDOUT?C	072h
	LCDOUT?C	065h
	LCDOUT?C	073h
	LCDOUT?C	073h
	LCDOUT?C	020h
	LCDOUT?C	053h
	LCDOUT?C	074h
	LCDOUT?C	061h
	LCDOUT?C	072h
	LCDOUT?C	074h

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00131	conteo = 0 
	MOVE?CW	000h, _conteo

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00132	ongoing = 0 
	MOVE?CT	000h, _ongoing

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00133	Write 1,ongoing
	WRITEADDRESS?C	001h
	WRITE?T	_ongoing

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00134	write 2,conteo.byte0
	WRITEADDRESS?C	002h
	WRITE?B	_conteo??BYTE0

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00135	Write 3,conteo.byte1
	WRITEADDRESS?C	003h
	WRITE?B	_conteo??BYTE1

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00137	restart_button:

	LABEL?L	_restart_button	

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00138	if start=1 then goto test_ongoing
	CMPNE?TCL	_start, 001h, L00018
	GOTO?L	_test_ongoing
	LABEL?L	L00018	

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00139	pause 50
	PAUSE?C	032h

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00140	goto restart_button ' Encierra hasta que haya un loop
	GOTO?L	_restart_button

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00142	ongoing_job: 'si esta rutina se ejecuta si hay trabajo pendiente. 

	LABEL?L	_ongoing_job	

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00144	print_warning:

	LABEL?L	_print_warning	

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00145	lcdout $FE,1, "Pending job"
	LCDOUT?C	0FEh
	LCDOUT?C	001h
	LCDOUT?C	050h
	LCDOUT?C	065h
	LCDOUT?C	06Eh
	LCDOUT?C	064h
	LCDOUT?C	069h
	LCDOUT?C	06Eh
	LCDOUT?C	067h
	LCDOUT?C	020h
	LCDOUT?C	06Ah
	LCDOUT?C	06Fh
	LCDOUT?C	062h

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00146	lcdout $FE,$C5, "Continue?"
	LCDOUT?C	0FEh
	LCDOUT?C	0C5h
	LCDOUT?C	043h
	LCDOUT?C	06Fh
	LCDOUT?C	06Eh
	LCDOUT?C	074h
	LCDOUT?C	069h
	LCDOUT?C	06Eh
	LCDOUT?C	075h
	LCDOUT?C	065h
	LCDOUT?C	03Fh

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00148	check_resume:

	LABEL?L	_check_resume	

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00149	if start=1 then 
	CMPNE?TCL	_start, 001h, L00020

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00150	gosub resume_sequence
	GOSUB?L	_resume_sequence

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00151	endif
	LABEL?L	L00020	

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00152	if parar=1 then 
	CMPNE?TCL	_parar, 001h, L00022

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00153	gosub stoppear
	GOSUB?L	_stoppear

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00154	endif
	LABEL?L	L00022	

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00155	goto check_resume:
	GOTO?L	_check_resume

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00157	resume_sequence: 

	LABEL?L	_resume_sequence	

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00158	flash_lcd = 0
	MOVE?CB	000h, _flash_lcd

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00159	FOr flash_lcd = 1 to 4
	MOVE?CB	001h, _flash_lcd
	LABEL?L	L00024	
	CMPGT?BCL	_flash_lcd, 004h, L00025

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00160	lcdout $fe,1,"Resuming Job"
	LCDOUT?C	0FEh
	LCDOUT?C	001h
	LCDOUT?C	052h
	LCDOUT?C	065h
	LCDOUT?C	073h
	LCDOUT?C	075h
	LCDOUT?C	06Dh
	LCDOUT?C	069h
	LCDOUT?C	06Eh
	LCDOUT?C	067h
	LCDOUT?C	020h
	LCDOUT?C	04Ah
	LCDOUT?C	06Fh
	LCDOUT?C	062h

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00161	pause 100
	PAUSE?C	064h

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00162	lcdout $fe,1
	LCDOUT?C	0FEh
	LCDOUT?C	001h

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00163	Pause 100
	PAUSE?C	064h

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00164	NExt
	NEXT?BCL	_flash_lcd, 001h, L00024
	LABEL?L	L00025	

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00165	ongoing = 1
	MOVE?CT	001h, _ongoing

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00166	write 1,ongoing
	WRITEADDRESS?C	001h
	WRITE?T	_ongoing

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00167	read 2,conteo.byte0
	READADDRESS?C	002h
	READ?B	_conteo??BYTE0

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00168	read 3,conteo.byte1
	READADDRESS?C	003h
	READ?B	_conteo??BYTE1

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00169	goto job
	GOTO?L	_job

; C:\USERS\SEBASTIAN\DESKTOP\NUEVA CARPETA (5)\CODIGO\CODE.PBP	00171	END
	END?	

	END
